# ======================================
# Banking Notification Service Configuration
# ======================================

# Server Configuration
NODE_ENV=development
PORT=3003
HOST=0.0.0.0

# ======================================
# Database Configuration
# ======================================

# PostgreSQL (Notification History)
DB_HOST=localhost
DB_PORT=5432
DB_NAME=banking_notifications
DB_USER=notification_user
DB_PASSWORD=notification_password_dev
DB_SSL=false

# MongoDB (User Preferences)
MONGO_URL=mongodb://localhost:27017/banking_notifications
MONGO_USER=notification_user
MONGO_PASSWORD=notification_password_dev

# Redis (Queues, Rate Limiting)
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=redis_password_dev
REDIS_TLS=false
REDIS_DB=0

# ======================================
# Kafka Configuration
# ======================================

KAFKA_BROKERS=localhost:9092
KAFKA_CLIENT_ID=banking-notification-service
KAFKA_GROUP_ID=notification-service-group

# Topics to consume
KAFKA_SECURITY_TOPIC=security-events
KAFKA_TRANSACTION_TOPIC=transaction-events
KAFKA_FRAUD_TOPIC=fraud-events
KAFKA_USER_TOPIC=user-events
KAFKA_NOTIFICATION_TOPIC=notification-events

# ======================================
# External Service Integrations
# ======================================

# Twilio (SMS)
TWILIO_ACCOUNT_SID=ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
TWILIO_AUTH_TOKEN=your_auth_token_here
TWILIO_PHONE_NUMBER=+15551234567
TWILIO_ENABLED=true

# SendGrid (Email)
SENDGRID_API_KEY=SG.xxxxxxxxxxxxxxxxxxxxxx
SENDGRID_FROM_EMAIL=notifications@banking.example.com
SENDGRID_FROM_NAME=Banking App
SENDGRID_ENABLED=true

# Firebase Cloud Messaging (Push Notifications)
FIREBASE_PROJECT_ID=banking-app-prod
FIREBASE_PRIVATE_KEY_PATH=./keys/firebase-service-account.json
FIREBASE_ENABLED=true

# WebSocket Gateway
WEBSOCKET_GATEWAY_URL=http://websocket-gateway:3001
WEBSOCKET_GATEWAY_API_KEY=your_api_key_here

# ======================================
# Security Configuration
# ======================================

FIELD_ENCRYPTION_KEY=0123456789abcdef0123456789abcdef
API_KEY_HEADER=X-API-Key
INTERNAL_API_KEY=your_internal_api_key_here

# ======================================
# Rate Limiting Configuration
# ======================================

# Default limits
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# Per-channel limits (per user)
SMS_LIMIT_PER_HOUR=10
SMS_LIMIT_PER_DAY=50
EMAIL_LIMIT_PER_HOUR=20
EMAIL_LIMIT_PER_DAY=100
PUSH_LIMIT_PER_HOUR=30
PUSH_LIMIT_PER_DAY=200

# ======================================
# Notification Settings
# ======================================

# Deduplication window (ms)
DEDUP_WINDOW_MS=300000

# Retry configuration
MAX_RETRY_ATTEMPTS=5
RETRY_INITIAL_DELAY_MS=1000
RETRY_MAX_DELAY_MS=3600000

# Digest batch schedule (cron-like)
DIGEST_ENABLED=true
DIGEST_CHECK_INTERVAL_MS=60000

# ======================================
# Logging Configuration
# ======================================

LOG_LEVEL=debug
LOG_FORMAT=pretty
